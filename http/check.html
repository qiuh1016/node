<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <script type="text/javascript" charset="utf-8">
      	mui.init({
      		swipeBack: true;
      	});
      	
    </script>
</head>
<body>
	
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
	    <h1 class="mui-title">周报查看</h1>
	</header>
	
	<div class="mui-content">
		<div class="mui-card" style="margin-bottom: 35px;">
			<ul class="mui-table-view" id="ul">
				<!--<li class='mui-table-view-cell' onclick="click(1)"><a class='mui-navigate-right'>Item1</a></li>
				<li class="mui-table-view-cell">Item 2</li>
				<li class="mui-table-view-cell">Item 3</li>-->
			</ul>
		</div>
	</div>
	
	<button type="button" class="mui-btn mui-btn-blue mui-btn-block" id="button" onclick="check()">查询</button>
	<p id="detail"></p>
	
	<script type="text/javascript" charset="utf-8">

		var dataJson;
	
		function check() {
			document.getElementById('ul').innerHTML = "";
			var _url = '/get';
			mui.getJSON(_url, {id: 21}, function(data) {
					//获得服务器响应
					dataJson = data;
					for (var i in data) {
						
						var submitter = data[i]['submitter'];
						var timesamp = data[i]['add_time'];
						
						document.getElementById('ul').innerHTML += 
							"<li class='mui-table-view-cell' onclick='showDetail("+ i +")'>" + 
							"<a class='mui-navigate-right'>" +
							submitter + "(" + timesamp + ")" 
							"</a></li>";
					}
				
				}
			);
		}
		
		function showDetail(i) {
			document.getElementById('detail').innerHTML = JSON.stringify(dataJson[i]);
		}

    </script>
</body>
</html>